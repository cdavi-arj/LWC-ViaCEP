<template>
    <lightning-card variant="Narrow" title="ViaCEP" icon-name="action:map">
        <!-- LOAD -->
        <template if:false={loaded}>
            <lightning-spinner alternative-text="Loading"></lightning-spinner>
        </template>

        <lightning-layout multiple-rows>
            <!-- CEP -->
            <lightning-layout-item size="4" padding="horizontal-small">
                <lightning-input 
                    label={label.CEP} 
                    name="cep" 
                    value={address.cep} 
                    type="text" 
                    id="cep" 
                    max-length="9"
                    onchange={handleFieldChange} 
                    onblur={handleBlurCEP}
                    required>
                </lightning-input>
            </lightning-layout-item>
            <!-- RUA -->
            <lightning-layout-item size="8" padding="horizontal-small">
                <lightning-input 
                    label={label.endereco} 
                    name="rua" 
                    value={address.logradouro} 
                    onchange={handleFieldChange} 
                    type="text" 
                    id="rua"
                    required>
                </lightning-input>
            </lightning-layout-item>
            <!-- BAIRRO -->
            <lightning-layout-item size="6" padding="horizontal-small">
                <lightning-input 
                    label={label.bairro} 
                    name="bairro" 
                    value={address.bairro} 
                    onchange={handleFieldChange} 
                    type="text"
                    id="bairro"
                    required>
                </lightning-input>
            </lightning-layout-item>
            <!-- CIDADE -->
            <lightning-layout-item size="6" padding="horizontal-small">
                <lightning-input 
                    label={label.cidade} 
                    name="cidade" 
                    onchange={handleFieldChange} 
                    value={address.localidade} 
                    type="text"
                    id="cidade"
                    required>
                </lightning-input>
            </lightning-layout-item>
            <!-- ESTADO -->
            <lightning-layout-item size="4" padding="horizontal-small">
                <lightning-input 
                    label={label.estado} 
                    name="uf" 
                    onchange={handleFieldChange} 
                    max-length="2" 
                    value={address.uf}
                    type="text" 
                    id="uf"
                    required>
                </lightning-input>
            </lightning-layout-item>
        </lightning-layout>

        <div class="slds-p-around-small" style="margin-top: 10px;">
            <lightning-map 
                lwc:if={showMap}
                map-markers={mapMarkers}
                zoom-level="15">
            </lightning-map>
        </div>

        <div slot="footer">
            <lightning-button 
                label={label.btnSalvar}
                onclick={handleSave}>
            </lightning-button>
        </div>

    </lightning-card>
</template>